### 時間參數注入(system prompt & history) 

### 個人歷史訊息（依照時間 & 使用者判斷是否注入）
- 定義：僅與特定使用者的互動記錄有關。每位使用者皆擁有自己的歷史資料區塊。
- 注入時機：當前任務判斷需要歷史上下文時，由腳本自動注入。
- 控制參數：
  - 時間閾值：預設寫死，未來可擴充為動態策略。
  - 使用者ID：綁定歷史記錄之對象。

### Agent 訊息注入
- 定義：指 Agent 回應的內容本身，加上回應時間，用作簡易記錄。
- 注入方式：由腳本控制，目前僅做基本輸出記錄。

### 對話歷史注入規則
所有對話歷史（包含使用者與 Agent 本身的回應）皆需完整記錄並分類儲存，特別留意 Agent 的歷史不被忽略。
- 依時間排序，確保回溯時序正確。
- 依角色標記，方便過濾與注入。
- 依使用者ID分類，方便綁定歷史記錄。
- 注入時機由腳本判斷，依需求選擇注入範圍。

### 對話歷史管理模組

為了讓歷史能有效分類與管理，我們將設計一個核心模組 `core/historyManager.js`（或等效命名），專責以下功能：

- 對話歷史儲存（依使用者、agent分類）
- 歷史訊息注入策略調度（根據時間等條件）
  
該模組將被 pluginsManager 或主控制流程呼叫，並以標準 API 提供存取介面。  
訊息內容的生成、編寫與格式化將由 `tools/fileEditor` 負責（如 YAML 或 JSON 編碼等），確保結構一致且易於回溯與持久化。