## 工具需求說明：時間偏移與時區計算

本文件為工具開發需求敘述，目的為明確規範一項支援「時間偏移」與「時區補正」功能的模組。該模組預期以程式方式接受輸入，輸出處理後的時間資訊。

工具名稱 : timeService
工具隸屬 : 插件(plugins)
工具類型 : llmTool

對於插件的要求，請去看plugins下方的regulation.md
這個工具是llmTool，所以要遵照llmTool的相關規範。

### 🎯 功能目標

* **支援輸入時間偏移參數 (Y, M, D, h, m, s)**：系統需以當前時間為基礎，依據偏移值進行加總或減去，輸出目標時間結果。
* **支援時區參數（timezone）**：當有指定時區時，需將 UTC 加上時區偏移後作為基準時間。
* **預設行為為使用 UTC+8 時區（台灣時間）**。

### 🧾 輸入格式需求

模組需接受以下 JSON 結構作為輸入：

```json
{
  "timezone": 8,       // 整數，可選，預設值為 8，僅支援 +8、+9、+10
  "Y": 0,              // 年偏移（可正可負）
  "M": 0,              // 月偏移（可正可負）
  "D": 0,              // 日偏移（可正可負）
  "h": 0,              // 時偏移（可正可負）
  "m": 0,              // 分偏移（可正可負）
  "s": 0               // 秒偏移（可正可負）
}
```

### 📤 預期輸出格式

模組應輸出下列格式之 JSON：

```json
{
  "result": "YYYY-MM-DD hh:mm:ss (UTC+X)"
}
```

### ✅ 處理邏輯要求

1. 取得當前 UTC 時間。
2. 將 `timezone` 加總至 UTC 時間，作為基準時間。
3. 依序加總輸入的 Y/M/D/h/m/s 偏移值（可為負），處理後進行曆法修正。
4. 格式化結果並輸出。

### 🔁 測試範例

#### 範例一：預設時區 +8，偏移 +1 小時

```json
{
  "h": 1
}
```

預期行為：若當前時間為 `2025-08-20 14:00:00 (UTC+8)`，則輸出：

```json
{
  "result": "2025-08-20 15:00:00 (UTC+8)"
}
```

#### 範例二：指定時區 +9，偏移 +1 天 2 小時

```json
{
  "timezone": 9,
  "D": 1,
  "h": 2
}
```

預期行為：若 UTC 為 `2025-08-20 06:00:00`，則 +9 時區為 `2025-08-20 15:00:00`，最終輸出：

```json
{
  "result": "2025-08-21 17:00:00 (UTC+9)"
}
```

#### 範例三：預設時區 +8，偏移 -2 天 -5 分

```json
{
  "D": -2,
  "m": -5
}
```

若當前時間為 `2025-08-20 14:00:00 (UTC+8)`，則輸出：

```json
{
  "result": "2025-08-18 13:55:00 (UTC+8)"
}
```

---

### ⚠️ 實作注意事項

* 偏移值允許為負數，需支援計算過去時間。
* 跨月與跨年應正確處理（例：2025-01-01 加 -1 天 → 2024-12-31）。
* 時區僅接受整數（不支援 8.5、9.5 等非整數時區）。
* 輸入值皆需為整數，錯誤類型需回傳清楚訊息。

---